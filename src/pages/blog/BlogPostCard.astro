---
import { getDateString } from "../../utils/datetime";

interface Props {
  thumbnail: { src: string; alt: string };
  title: string;
  description: string;
  publishingDate: Date;
  updated?: Date;
  href: string;
}

const { thumbnail, title, description, publishingDate, href, updated } =
  Astro.props;
---

<section class="blog-card">
  <article>
    <div class="content">
      {
        updated !== undefined ? (
          <p class="publishing-date">{`${getDateString(
            publishingDate
          )} (updated on ${getDateString(updated)})`}</p>
        ) : (
          <p class="publishing-date">{`${getDateString(publishingDate)}`}</p>
        )
      }
      <h2><a href={href}>{title}</a></h2>
      <p>{description}</p>
    </div>
    <a href={href} class="read-button">LÃ¦s &rarr;</a>
  </article>
  <img src={thumbnail.src} alt={thumbnail.alt} />
</section>

<style lang="scss">
  .blog-card {
    display: grid;
    grid-template-columns: 3fr 1fr;

    @media (max-width: 700px) {
      grid-template-columns: 1fr;

      & img {
        justify-self: center;
      }
    }

    & article {
      display: flex;
      flex-direction: column;
      align-items: flex-start;
      justify-content: space-between;
      height: 100%;
      text-align: left;
      gap: 20px;
      margin-right: 50px;

      @media (max-width: 700px) {
        margin-right: 0;
      }

      & .content {
        display: flex;
        gap: 10px;
        flex-direction: column;
      }
    }

    & .content p:last-of-type {
      font-size: 14px;
      color: var(--lightdark);

      @media (max-width: 700px) {
        font-size: 16px;
      }
    }

    & .publishing-date {
      font-size: 14px;
      color: var(--grey);
    }

    & a {
      text-decoration: none;
      color: var(--dark);
      transition: all 0.2s ease-out;

      &:is(:hover, :focus-within) {
        color: var(--accent-secondary);
      }
    }

    & .read-button {
      font-size: 18px;
      font-weight: 700;
      padding: 20px;
      padding-left: 0;

      @media (max-width: 700px) {
        padding: 0;
        font-size: 22px;
        font-weight: 900;
      }

      &:is(:hover, :focus-within) {
        transform: translateX(20%);
      }
    }

    & img {
      border-radius: 10px;
      height: 100%;
      object-fit: cover;
    }
  }
</style>
